{"version":3,"sources":["webpack:///./src/components/data_collection/Edit.vue","webpack:///./src/components/data_collection/Edit.vue?f411","webpack:///./src/components/data_collection/Edit.vue?71c6"],"names":["data_collection_Edit","data","id","sessionStorage","getItem","dataCollect","title","instruction","fileUrl","fileName","remindWay","remindContent","delFlag","fileList","mounted","this","findDataCollectById","methods","_this","$post","then","m","remind_way","content","tDataCollect","split","forEach","item","index","push","fileObj","name","url","saveData","_this2","length","$message","showClose","message","type","join","resultCode","$router","path","uploadSuccess","response","file","fileInfo","handleRemove","handleExceed","files","beforeRemove","$confirm","viewData","setItem","components_data_collection_Edit","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","on","click","_e","plain","$event","go","label-width","label","required","staticStyle","width","model","value","callback","$$v","$set","expression","autosize","minRows","action","on-remove","before-remove","on-success","limit","accept","on-exceed","file-list","size","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/29.bd85af63de39aa805bde.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  data() {\r\n    return {\r\n    \tid: sessionStorage.getItem(\"DataCollectionID\"),\r\n    \tdataCollect: {\r\n    \t\tid: '',\r\n    \t\ttitle: '',\r\n    \t\tinstruction: '',\r\n    \t\tfileUrl: '',\r\n    \t\tfileName: '',\r\n    \t\tremindWay: [],\r\n    \t\tremindContent: '',\r\n    \t\tdelFlag: false\r\n    \t},\r\n    \tfileList: [],\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n\t\tif(!!this.id) { //修改\r\n\t\t\tthis.findDataCollectById();\r\n\t\t}\r\n  },\r\n\r\n  methods: {\r\n  \t//修改查询数据\r\n  \tfindDataCollectById() {\r\n  \t\tthis.$post('/admin/findDataCollectById', { 'id': this.id }).then((m) => {\r\n  \t\t\t//组装数据\r\n  \t\t\tlet remind_way = [];\r\n  \t\t\tlet dataCollect = m.content.tDataCollect;\r\n  \t\t\tdataCollect.remindWay.split(',').forEach((item,index) => {\r\n  \t\t\t\tremind_way.push(item);\r\n  \t\t\t})\r\n  \t\t\tthis.dataCollect.id = dataCollect.id;\r\n  \t\t\tthis.dataCollect.title = dataCollect.title;\n  \t\t\tthis.dataCollect.instruction = dataCollect.instruction;\n  \t\t\tthis.dataCollect.fileUrl = dataCollect.fileUrl;\r\n  \t\t\tthis.dataCollect.fileName = dataCollect.fileName;\n  \t\t\tthis.dataCollect.remindWay = remind_way;\n  \t\t\tthis.dataCollect.remindContent = dataCollect.remindContent;\r\n  \t\t\tlet fileObj = {};\r\n  \t\t\tfileObj.name = dataCollect.fileName;\r\n  \t\t\tfileObj.url = dataCollect.fileUrl;\r\n  \t\t\tthis.fileList.push(fileObj);\r\n  \t\t})\r\n  \t},\r\n\t\tsaveData() {\r\n\t\t\tif(!!!this.dataCollect.title) {\r\n\t\t\t\treturn this.$message({\r\n          showClose: true,\r\n          message: '请输入标题！',\r\n          type: 'error'\r\n        });\r\n\t\t\t}\r\n\t\t\tif(!!!this.dataCollect.instruction) {\r\n\t\t\t\treturn this.$message({\r\n          showClose: true,\r\n          message: '请输入说明！',\r\n          type: 'error'\r\n        });\r\n\t\t\t}\r\n\t\t\tif(this.fileList.length < 1) {\r\n\t\t\t\treturn this.$message({\r\n          showClose: true,\r\n          message: '请上传文件！',\r\n          type: 'error'\r\n        });\r\n\t\t\t}\r\n\t\t\tif(this.dataCollect.remindWay.length < 1) {\r\n\t\t\t\treturn this.$message({\r\n          showClose: true,\r\n          message: '请选择提醒方式！',\r\n          type: 'error'\r\n        });\r\n\t\t\t}\r\n\t\t\tif(!!!this.dataCollect.remindContent) {\r\n\t\t\t\treturn this.$message({\r\n          showClose: true,\r\n          message: '请输入提醒内容！',\r\n          type: 'error'\r\n        });\r\n\t\t\t}\r\n\t\t\tthis.dataCollect.remindWay = this.dataCollect.remindWay.join(',');\r\n\t\t\tthis.$post('/admin/saveDataCollect', this.dataCollect).then((m) => {\r\n  \t\t\tif(m.resultCode == 0) {\r\n\t  \t\t\t\tthis.$message({\r\n\t\t    \t\t\tshowClose: true,\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmessage: '操作成功！'\r\n\t\t\t\t\t\t});\r\n\t  \t\t\t}\r\n  \t\t\tthis.$router.push({ path: '/DataCollection' });\r\n\t\t\t})\r\n\t\t},\r\n\t\tuploadSuccess(response, file, fileList) {\r\n\t\t\tif(file.response.content.fileInfo == 'noTemplate') {\r\n\t\t\t\treturn this.$message({\r\n    \t\t\tshowClose: true,\r\n\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\tmessage: '上传表格不符合要求，请重新上传！'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.dataCollect.fileUrl = file.response.content.fileInfo;\n\t\t\tthis.dataCollect.fileName = file.response.content.fileName;\r\n\t\t\tthis.fileList = fileList;\r\n\t\t},\r\n    handleRemove(file, fileList) {\r\n    \tthis.dataCollect.delFlag = true; //删除过文件的标识\r\n    \tthis.fileList = [];\r\n    },\r\n    handleExceed(files, fileList) {\r\n    \tthis.$message({\r\n    \t\t\tshowClose: true,\r\n\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\tmessage: '当前限制只能上传一个文件，先删除原文件再重新上传。'\r\n\t\t\t\t});\r\n    },\r\n    beforeRemove(file, fileList) {\r\n      return this.$confirm(`确定删除 ${ file.name }？`);\r\n    },\r\n    //预览\r\n    viewData() {\r\n    \tsessionStorage.setItem(\"previewID\", this.id);\n    \tsessionStorage.setItem(\"previewFlag\", false);\r\n    \tsessionStorage.setItem(\"showFirst\", \"0\");\r\n  \t\tthis.$router.push({ name: 'SubmitDataEdit'});\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/data_collection/Edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"data-collection__edit plate\"},[_c('div',{staticClass:\"plate-title clearfix\"},[_c('span',[_vm._v(\"创建内容\")]),_vm._v(\" \"),_c('section',{staticClass:\"pull-right\"},[(!!_vm.id)?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.viewData}},[_vm._v(\"预览\")]):_vm._e(),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.saveData}},[_vm._v(\"提交\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"返回\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"plate-alone\"},[_c('el-form',{attrs:{\"label-width\":\"90px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\",\"required\":\"\"}},[_c('el-input',{staticStyle:{\"width\":\"220px\"},model:{value:(_vm.dataCollect.title),callback:function ($$v) {_vm.$set(_vm.dataCollect, \"title\", $$v)},expression:\"dataCollect.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"说明\",\"required\":\"\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 4 }},model:{value:(_vm.dataCollect.instruction),callback:function ($$v) {_vm.$set(_vm.dataCollect, \"instruction\", $$v)},expression:\"dataCollect.instruction\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"导入表格\",\"required\":\"\"}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"name\":\"file\",\"action\":\"/ganzhoubaobiao/admin/commonUpload\",\"on-remove\":_vm.handleRemove,\"before-remove\":_vm.beforeRemove,\"on-success\":_vm.uploadSuccess,\"limit\":1,\"accept\":\".xls,.xlsx\",\"on-exceed\":_vm.handleExceed,\"file-list\":_vm.fileList}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传xls/xlsx文件\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"提醒方式\",\"required\":\"\"}},[_c('el-checkbox-group',{model:{value:(_vm.dataCollect.remindWay),callback:function ($$v) {_vm.$set(_vm.dataCollect, \"remindWay\", $$v)},expression:\"dataCollect.remindWay\"}},[_c('el-checkbox',{attrs:{\"label\":\"1\"}},[_vm._v(\"App 推送\")]),_vm._v(\" \"),_c('el-checkbox',{attrs:{\"label\":\"2\"}},[_vm._v(\"短信通知\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"提醒内容\",\"required\":\"\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 4 }},model:{value:(_vm.dataCollect.remindContent),callback:function ($$v) {_vm.$set(_vm.dataCollect, \"remindContent\", $$v)},expression:\"dataCollect.remindContent\"}})],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5b47daff\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!./node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/data_collection/Edit.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5b47daff\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/data_collection/Edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}