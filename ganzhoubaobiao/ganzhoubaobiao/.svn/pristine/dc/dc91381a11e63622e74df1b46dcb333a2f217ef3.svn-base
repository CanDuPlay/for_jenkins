{"version":3,"sources":["webpack:///./src/components/data_collection/Edit.vue","webpack:///./src/components/data_collection/Edit.vue?f411","webpack:///./src/components/data_collection/Edit.vue?2a50"],"names":["data_collection_Edit","data","id","sessionStorage","getItem","dataCollect","title","instruction","fileUrl","fileName","remindWay","remindContent","fileList","mounted","this","findDataCollectById","methods","_this","$post","then","m","remind_way","content","tDataCollect","split","forEach","item","index","push","fileObj","name","url","saveData","_this2","length","$message","showClose","message","type","join","resultCode","$router","path","uploadSuccess","response","file","fileInfo","handleRemove","handleExceed","files","beforeRemove","$confirm","viewData","components_data_collection_Edit","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","on","click","plain","$event","go","label-width","label","required","staticStyle","width","model","value","callback","$$v","$set","expression","autosize","minRows","action","on-remove","before-remove","on-success","limit","accept","on-exceed","file-list","size","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/29.ca2e8436451a1bb12ae1.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  data() {\r\n    return {\r\n    \tid: sessionStorage.getItem(\"DataCollectionID\"),\r\n    \tdataCollect: {\r\n    \t\tid: '',\r\n    \t\ttitle: '',\r\n    \t\tinstruction: '',\r\n    \t\tfileUrl: '',\r\n    \t\tfileName: '',\r\n    \t\tremindWay: [],\r\n    \t\tremindContent: ''\r\n    \t},\r\n    \tfileList: [],\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n\t\tif(!!this.id) { //修改\r\n\t\t\tthis.findDataCollectById();\r\n\t\t}\r\n  },\r\n\r\n  methods: {\r\n  \t//修改查询数据\r\n  \tfindDataCollectById() {\r\n  \t\tthis.$post('/admin/findDataCollectById', { 'id': this.id }).then((m) => {\r\n  \t\t\t//组装数据\r\n  \t\t\tlet remind_way = [];\r\n  \t\t\tlet dataCollect = m.content.tDataCollect;\r\n  \t\t\tdataCollect.remindWay.split(',').forEach((item,index) => {\r\n  \t\t\t\tremind_way.push(item);\r\n  \t\t\t})\r\n  \t\t\tthis.dataCollect.id = dataCollect.id;\r\n  \t\t\tthis.dataCollect.title = dataCollect.title;\n  \t\t\tthis.dataCollect.instruction = dataCollect.instruction;\n  \t\t\tthis.dataCollect.fileUrl = dataCollect.fileUrl;\r\n  \t\t\tthis.dataCollect.fileName = dataCollect.fileName;\n  \t\t\tthis.dataCollect.remindWay = remind_way;\n  \t\t\tthis.dataCollect.remindContent = dataCollect.remindContent;\r\n  \t\t\tlet fileObj = {};\r\n  \t\t\tfileObj.name = dataCollect.fileName;\r\n  \t\t\tfileObj.url = dataCollect.fileUrl;\r\n  \t\t\tthis.fileList.push(fileObj);\r\n  \t\t})\r\n  \t},\r\n\t\tsaveData() {\r\n\t\t\tif(!!!this.dataCollect.title) {\r\n\t\t\t\treturn this.$message({\r\n          showClose: true,\r\n          message: '请输入标题！',\r\n          type: 'error'\r\n        });\r\n\t\t\t}\r\n\t\t\tif(!!!this.dataCollect.instruction) {\r\n\t\t\t\treturn this.$message({\r\n          showClose: true,\r\n          message: '请输入说明！',\r\n          type: 'error'\r\n        });\r\n\t\t\t}\r\n\t\t\tif(this.fileList.length < 1) {\r\n\t\t\t\treturn this.$message({\r\n          showClose: true,\r\n          message: '请上传文件！',\r\n          type: 'error'\r\n        });\r\n\t\t\t}\r\n\t\t\tif(this.dataCollect.remindWay.length < 1) {\r\n\t\t\t\treturn this.$message({\r\n          showClose: true,\r\n          message: '请选择提醒方式！',\r\n          type: 'error'\r\n        });\r\n\t\t\t}\r\n\t\t\tif(!!!this.dataCollect.remindContent) {\r\n\t\t\t\treturn this.$message({\r\n          showClose: true,\r\n          message: '请输入提醒内容！',\r\n          type: 'error'\r\n        });\r\n\t\t\t}\r\n\t\t\tthis.dataCollect.remindWay = this.dataCollect.remindWay.join(',');\r\n\t\t\tthis.$post('/admin/saveDataCollect', this.dataCollect).then((m) => {\r\n  \t\t\tif(m.resultCode == 0) {\r\n\t  \t\t\t\tthis.$message({\r\n\t\t    \t\t\tshowClose: true,\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmessage: '操作成功！'\r\n\t\t\t\t\t\t});\r\n\t  \t\t\t}\r\n  \t\t\tthis.$router.push({ path: '/DataCollection' });\r\n\t\t\t})\r\n\t\t},\r\n\t\tuploadSuccess(response, file, fileList) {\r\n\t\t\tthis.dataCollect.fileUrl = file.response.content.fileInfo;\n\t\t\tthis.dataCollect.fileName = file.response.content.fileName;\r\n\t\t\tthis.fileList = fileList;\r\n\t\t},\r\n    handleRemove(file, fileList) {\r\n    \tthis.fileList = [];\r\n    },\r\n    handleExceed(files, fileList) {\r\n    \tthis.$message({\r\n    \t\t\tshowClose: true,\r\n\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\tmessage: '当前限制只能上传一个文件，先删除原文件再重新上传。'\r\n\t\t\t\t});\r\n    },\r\n    beforeRemove(file, fileList) {\r\n      return this.$confirm(`确定删除 ${ file.name }？`);\r\n    },\r\n    //预览\r\n    viewData() {\r\n    \tthis.$post('/admin/viewDataCollect', { 'id': this.id }).then((m) => {\r\n    \t\t\r\n    \t})\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/data_collection/Edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"data-collection__edit plate\"},[_c('div',{staticClass:\"plate-title clearfix\"},[_c('span',[_vm._v(\"创建内容\")]),_vm._v(\" \"),_c('section',{staticClass:\"pull-right\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.viewData}},[_vm._v(\"预览\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.saveData}},[_vm._v(\"提交\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"返回\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"plate-alone\"},[_c('el-form',{attrs:{\"label-width\":\"90px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\",\"required\":\"\"}},[_c('el-input',{staticStyle:{\"width\":\"220px\"},model:{value:(_vm.dataCollect.title),callback:function ($$v) {_vm.$set(_vm.dataCollect, \"title\", $$v)},expression:\"dataCollect.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"说明\",\"required\":\"\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 4 }},model:{value:(_vm.dataCollect.instruction),callback:function ($$v) {_vm.$set(_vm.dataCollect, \"instruction\", $$v)},expression:\"dataCollect.instruction\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"导入表格\",\"required\":\"\"}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"name\":\"file\",\"action\":\"/ganzhoubaobiao/admin/commonUpload\",\"on-remove\":_vm.handleRemove,\"before-remove\":_vm.beforeRemove,\"on-success\":_vm.uploadSuccess,\"limit\":1,\"accept\":\".xls,.xlsx\",\"on-exceed\":_vm.handleExceed,\"file-list\":_vm.fileList}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传xls/xlsx文件\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"提醒方式\",\"required\":\"\"}},[_c('el-checkbox-group',{model:{value:(_vm.dataCollect.remindWay),callback:function ($$v) {_vm.$set(_vm.dataCollect, \"remindWay\", $$v)},expression:\"dataCollect.remindWay\"}},[_c('el-checkbox',{attrs:{\"label\":\"1\"}},[_vm._v(\"App 推送\")]),_vm._v(\" \"),_c('el-checkbox',{attrs:{\"label\":\"2\"}},[_vm._v(\"短信通知\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"提醒内容\",\"required\":\"\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 4 }},model:{value:(_vm.dataCollect.remindContent),callback:function ($$v) {_vm.$set(_vm.dataCollect, \"remindContent\", $$v)},expression:\"dataCollect.remindContent\"}})],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3885e802\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!./node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/data_collection/Edit.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3885e802\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/data_collection/Edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}