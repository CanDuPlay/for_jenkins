webpackJsonp([30],{KW3H:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("1/Ac"),s={data:function(){return{item:sessionStorage.getItem("DataCollectionItem"),params:"",value:"",status:2,tableData:[],pageList:[],pageSize:10,currentPage:1,checkList:[],submitItem:{}}},mounted:function(){this.$nextTick(function(){this.submitItem=JSON.parse(this.item),this.viewSubmitCondition()})},methods:{dateFormat:function(t,e,a,s){var n=t[e.property];return n?Object(i.b)(new Date(n),"YYYY-MM-DD HH:mm:ss"):""},viewSubmitCondition:function(){var t=this;this.$post("/admin/viewSubmitCondition",{id:this.submitItem.id,params:this.params,status:this.status,page:this.currentPage-1,size:this.pageSize}).then(function(e){t.tableData=e.content.page.content,t.pageList=e.content.page})},changeStatus:function(t){var e=this;this.status=t,this.$post("/admin/viewSubmitCondition",{id:this.submitItem.id,params:this.params,status:this.status,page:this.currentPage-1,size:this.pageSize}).then(function(t){e.tableData=t.content.page.content,e.pageList=t.content.page})},goDetail:function(t){sessionStorage.removeItem("previewID"),sessionStorage.setItem("previewFileUrl",t.fileUrl),sessionStorage.setItem("previewDetailID",t.collectId),sessionStorage.setItem("previewFlag",!1),this.$router.push({name:"SubmitDataEdit"})},downFile:function(t){window.open("/ganzhoubaobiao/admin/downDataCollectData?id="+t.id+"&fileUrl="+t.fileUrl)},remindSub:function(t){var e=this;this.$post("/admin/remindSubmit",{id:t.id,phone:t.phone}).then(function(t){0==t.resultCode?e.$message({showClose:!0,type:"success",message:"提醒成功！"}):e.$message({showClose:!0,type:"error",message:t.resultDesc})})},handleSizeChange:function(t){this.currentPage=1,this.pageSize=t,this.viewSubmitCondition()},handleCurrentChange:function(t){this.currentPage=t,this.viewSubmitCondition()}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"data-collection__detail plate"},[a("div",{staticClass:"plate-title"},[t._v("\n    "+t._s(t.submitItem.title)+"\n  ")]),t._v(" "),a("el-form",{staticClass:"clearfix",staticStyle:{padding:"15px 20px"},attrs:{inline:""}},[a("el-form-item",[t._v("\n        总数："+t._s(t.submitItem.sumNumber)+"   \n        "),a("span",{staticStyle:{margin:"0 5px"}},[t._v("|")]),t._v("   \n        已提交："+t._s(t.submitItem.referNumber)+" \n        "),a("span",{staticStyle:{margin:"0 5px"}},[t._v("|")]),t._v("   \n        未读："+t._s(t.submitItem.sumNumber-t.submitItem.referNumber)+"\n      ")]),t._v(" "),a("el-form-item",[a("el-input",{staticClass:"margin-right__mini",staticStyle:{width:"180px"},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.viewSubmitCondition}},[t._v("查询")])],1),t._v(" "),a("el-form-item",[a("el-radio-group",{on:{change:t.changeStatus},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("el-radio",{attrs:{label:"2"}},[t._v("全部")]),t._v(" "),a("el-radio",{attrs:{label:"1"}},[t._v("已提交")]),t._v(" "),a("el-radio",{attrs:{label:"0"}},[t._v("未提交")])],1)],1)],1),t._v(" "),a("el-table",{staticClass:"first-cell__left margin-bottom__small",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"260"}},[a("el-table-column",{attrs:{type:"selection",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{width:"80",prop:"name",label:"接收人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"townName",label:"归属区县"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone","show-overflow-tooltip":"",label:"手机号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"submitTime","show-overflow-tooltip":"",formatter:t.dateFormat,sortable:"",label:"提交日期"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.isSubmit?a("span",{staticClass:"state-style is-state__1-text"},[t._v("已提交")]):a("span",{staticClass:"state-style is-state__2-text"},[t._v("未提交")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.remindCount?a("el-button",[a("span",{staticStyle:{color:"#f63636"}},[t._v("再次提醒（"+t._s(i.remindCount)+"）")])]):t._e(),t._v(" "),0==i.isSubmit&&i.remindCount<1?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.remindSub(i)}}},[t._v("提醒提交")]):t._e(),t._v(" "),1==i.isSubmit?a("el-button",{on:{click:function(e){return t.goDetail(i)}}},[t._v("详情")]):t._e(),t._v(" "),1==i.isSubmit?a("el-button",{on:{click:function(e){return t.downFile(i)}}},[t._v("下载")]):t._e()]}}])})],1),t._v(" "),t.pageList.totalPages>0?a("el-pagination",{staticClass:"is-background-white text-center margin-bottom__small",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageList.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1)},staticRenderFns:[]},o=a("C7Lr")(s,n,!1,null,null,null);e.default=o.exports}});
//# sourceMappingURL=30.28c1745d3cfeb43394b2.js.map