webpackJsonp([12],{"3OpV":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("J8vU");var n={data:function(){return{form:{},month:"",value:"",count:0,tags:[],tableData:[],tableCountData:[],CITY:1,DISTRICT:2,SCHOOL:3,projectId:sessionStorage.getItem("kanbanProjectId"),projectName:sessionStorage.getItem("kanbanProjectName")}},computed:{tMenu:function(){return this.tableData[0].scheduleList}},mounted:function(){this.$nextTick(function(){})},methods:{addDate:function(){""!=this.month&&this.tags.push({name:this.month,key:this.count++})},closeTag:function(t){this.tags.splice(this.tags.indexOf(t),1)},queryClick:function(){var t="";if(0==this.tags.length)return this.$message({showClose:!0,type:"error",message:"请选择月份!"}),!1;this.tags.forEach(function(e,s){t+=e.name+","}),this.queryInit(t.substring(0,t.length-1)),this.queryCountInit(t.substring(0,t.length-1))},queryInit:function(t){var e=this;console.log(this.projectId),this.$post("/web/monthContrast",{projectId:this.projectId,months:t}).then(function(t){e.getSpanArr(t.content.list)})},queryCountInit:function(t){var e=this;this.$post("/web/monthContrastCount",{projectId:this.projectId,months:t}).then(function(t){e.tableCountData=t.content.list})},getSpanArr:function(t){console.log(t),this._spanArr=[];for(var e=0;e<t.length;e++)0===e?(this._spanArr.push(1),this._pos=0):t[e].schoolName===t[e-1].schoolName?(this._spanArr[this._pos]+=1,this._spanArr.push(0)):(this._spanArr.push(1),this._pos=e);this.tableData=t},rowMerge:function(t){return this._spanArr[t]},setRowClass:function(t){return t.types===this.DISTRICT?"district":t.types===this.SCHOOL?"school_"+t.pId:void 0}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"monthly-wrapper"},[s("p",{staticClass:"monthly-title-bar"},[s("span",[t._v(t._s(t.projectName)+"各年度实施项目月进度调度对比看板")]),t._v(" "),s("el-button",{staticClass:"pull-right",attrs:{type:"text"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])],1),t._v(" "),s("el-form",{ref:"form",attrs:{inline:"",model:t.form}},[s("el-form-item",{attrs:{label:"数据对比统计"}},[s("el-date-picker",{attrs:{format:"yyyy-MM",type:"month","value-format":"yyyy-MM",placeholder:"选择月份"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}}),t._v(" "),s("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:t.addDate}},[t._v("添加时间")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.queryClick}},[t._v("查询")])],1),t._v(" "),s("el-form-item",t._l(t.tags,function(e){return s("el-tag",{key:e.key,staticStyle:{margin:"0 10px 0px 0"},attrs:{closable:""},on:{close:function(s){return t.closeTag(e)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])}),1)],1),t._v(" "),s("div",{staticClass:"table-wrap"},[s("table",{staticClass:"table multifunction-table margin-bottom__medium"},[t._m(0),t._v(" "),s("tbody",t._l(t.tableCountData,function(e,n){return s("tr",{key:n},[s("td",[t._v(t._s(n+1))]),t._v(" "),s("td",[t._v(t._s(e.month))]),t._v(" "),s("td",[t._v(t._s(e.kg))]),t._v(" "),s("td",[t._v(t._s(e.wkg))]),t._v(" "),s("td",[t._v(t._s(e.sy))]),t._v(" "),s("td",[t._v(t._s(e.kgl)+"%")]),t._v(" "),s("td",[t._v(t._s(e.wkgl)+"%")]),t._v(" "),s("td",[t._v(t._s(e.wcl)+"%")])])}),0)]),t._v(" "),t.tableData.length?s("table",{staticClass:"table multifunction-table",attrs:{id:"spectaculars-table"}},[s("thead",[s("tr",[s("th",{attrs:{rowspan:"2"}},[t._v("项目学校")]),t._v(" "),s("th",{attrs:{rowspan:"2"}},[t._v("月份")]),t._v(" "),s("th",{attrs:{colspan:t.tMenu.length}},[t._v("项目形象进度情况")]),t._v(" "),s("th",{attrs:{rowspan:"2"}},[t._v("累计完成投资")])]),t._v(" "),s("tr",t._l(t.tMenu,function(e,n){return s("th",{key:n,style:{backgroundColor:e.color}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.name)+"\n          ")])}),0)]),t._v(" "),s("tbody",t._l(t.tableData,function(e,n){return s("tr",{key:n,class:[t.setRowClass(e),{"row-city__bgcolor":e.types===t.CITY,"row-district__bgcolor":e.types===t.DISTRICT}]},[s("td",{class:{hide:0===t.rowMerge(n)},attrs:{rowspan:t.rowMerge(n)}},[t._v(t._s(e.schoolName))]),t._v(" "),s("td",[t._v(t._s(e.month))]),t._v(" "),t._l(t.tMenu,function(n,o){return s("td",{key:o},[e.level==t.CITY||e.level==t.DISTRICT?s("span",[t._v(t._s(null!=e.scheduleList[o]&&null!=e.scheduleList[o].count?e.scheduleList[o].count:""))]):n.id===e.schedule?s("i",{staticClass:"el-icon-star-on",staticStyle:{color:"#f54b10"}}):t._e()])}),t._v(" "),s("td",[t._v(t._s(e.allInvest))])],2)}),0)]):t._e()])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("序号")]),t._v(" "),s("th",[t._v("月份/统计项")]),t._v(" "),s("th",[t._v("开工")]),t._v(" "),s("th",[t._v("未开工")]),t._v(" "),s("th",[t._v("可投入使用")]),t._v(" "),s("th",[t._v("开工率")]),t._v(" "),s("th",[t._v("未开工率")]),t._v(" "),s("th",[t._v("完成率")])])])}]};var a=s("C7Lr")(n,o,!1,function(t){s("ubWi")},"data-v-b75ecf9e",null);e.default=a.exports},ubWi:function(t,e){}});
//# sourceMappingURL=12.5e23f7578f9fd516fb88.js.map