webpackJsonp([19],{"2hCm":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=["#fee9e9","#e1f5fe","#e8f6ed"],s={data:function(){return{value:"",options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"}],tableData:[],tableData1:[{id:1,time:"2018-12-11  17:20",plan:"设计",money:100,imgs:[a("7Otq"),a("7Otq")]}],tableHistory:[{date:"2016年05月02日 17:20",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄",src:a("7Otq")},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄",src:a("7Otq")},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄",src:a("7Otq")},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄",src:a("7Otq")}],dialogTime:!1,dialogVisible:!1,dialogImageUrl:"",checkbox:!1,radio:1,colors:l,planList:[{id:1,name:"未开工",type:1,currentPlan:1,list:[{label:"征地",value:1},{label:"图审",value:2}]},{id:2,name:"未开工",type:2,currentPlan:2,list:[{label:"征地",value:1},{label:"图审",value:2}]},{id:3,name:"未开工",type:3,currentPlan:1,list:[{label:"征地",value:1},{label:"图审",value:2}]}],projectId:this.$route.params.projectId,townId:sessionStorage.getItem("townId"),project:{}}},mounted:function(){var t=this;this.$nextTick(function(){t.init();var e=[{id:1,type:1,name:"未开始",plan:"征地",state:1,money:100,timer:"2018-08——2018-12"},{id:1,type:1,name:"未开始",plan:"征地",state:2,money:100,timer:"2018-08——2018-12"},{id:1,type:1,name:"未开始",plan:"征地",state:2,money:100,timer:"2018-08——2018-12"},{id:2,type:2,name:"开工进行中",plan:"征地",state:2,money:100,timer:"2018-08——2018-12"},{id:3,type:3,name:"投入使用",plan:"征地",state:2,money:100,timer:"2018-08——2018-12"}];t.getSpanArr(e),t.tableData=e})},methods:{init:function(){var t=this;this.$post("/web/queryTownProject",{projectId:this.projectId,townId:this.townId}).then(function(e){0==e.resultCode&&(t.project=e.content.project)})},handleRemove:function(t,e){console.log(t,e)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url||t,this.dialogVisible=!0},getSpanArr:function(t){this._spanArr=[];for(var e=0;e<t.length;e++)0===e?(this._spanArr.push(1),this._pos=0):t[e].id===t[e-1].id?(this._spanArr[this._pos]+=1,this._spanArr.push(0)):(this._spanArr.push(1),this._pos=e)},arraySpanMethod:function(t){t.row,t.column;var e=t.rowIndex;if(0===t.columnIndex){var a=this._spanArr[e];return{rowspan:a,colspan:a>0?1:0}}},setCellStyle:function(t){t.row,t.column,t.rowIndex;return 0===t.columnIndex?(void 0===this._index?this._index=0:this._index++,{backgroundColor:l[this._index%3],fontSize:"16px"}):{color:"#606266"}},quxiao:function(){}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"city-add__wrapper plate"},[a("div",{staticClass:"plate-bottom has-padding has-radius margin-bottom__small"},[a("el-row",{attrs:{gutter:18}},[a("el-col",{attrs:{span:14}},[a("el-form",{attrs:{"label-width":"85px"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{attrs:{disabled:""},model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开工年份"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year",placeholder:"选择年",disabled:""},model:{value:t.project.startTime,callback:function(e){t.$set(t.project,"startTime",e)},expression:"project.startTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"竣工年份"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year",placeholder:"选择年",disabled:""},model:{value:t.project.endTime,callback:function(e){t.$set(t.project,"endTime",e)},expression:"project.endTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"建筑面积"}},[a("el-input",{attrs:{disabled:""},model:{value:t.project.area,callback:function(e){t.$set(t.project,"area",e)},expression:"project.area"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"新增学位"}},[a("el-input",{attrs:{disabled:""},model:{value:t.project.newBuild,callback:function(e){t.$set(t.project,"newBuild",e)},expression:"project.newBuild"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"规划投资"}},[a("el-input",{attrs:{disabled:""},model:{value:t.project.invest,callback:function(e){t.$set(t.project,"invest",e)},expression:"project.invest"}})],1)],1),t._v(" "),a("el-col",{staticClass:"text-right",attrs:{span:8}},[a("span",{staticStyle:{color:"#f63636"}},[t._v("累计完成投资"+t._s(t.project.totalInvest))])])],1)],1),t._v(" "),a("section",{staticClass:"plan-list__wrapper"},[a("p",{staticClass:"margin-bottom__mini"},[t._v("进度情况")]),t._v(" "),t._l(t.planList,function(e,l){return a("table",{key:l,staticClass:"plan-table"},[a("tr",{style:{"background-color":t.colors[l%3]}},[a("th",{staticClass:"text-left"},[t._v(t._s(e.name))]),t._v(" "),a("th",[1===e.type?a("div",{staticClass:"time-icon__wrapper text-center pull-right"},[a("i",{staticClass:"el-icon-time",on:{click:function(e){t.dialogTime=!0}}})]):t._e()])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},t._l(e.list,function(l,s){return a("el-radio",{key:s,attrs:{label:l.value,border:""},model:{value:e.currentPlan,callback:function(a){t.$set(e,"currentPlan",a)},expression:"item.currentPlan"}},[t._v(t._s(l.label))])}),1)])])}),t._v(" "),a("el-form",{attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"本月投入"}},[a("el-input",{staticStyle:{width:"100px"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"重点说明"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上传材料"}},[a("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),a("el-form-item",{staticClass:"text-right"},[a("el-button",{attrs:{type:"primary"}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:t.quxiao}},[t._v("取消")])],1)],1)],2)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"right-wrapper"},[a("p",{staticClass:"title-bar"},[a("span",{staticClass:"titles"},[t._v("项目计划表")])]),t._v(" "),a("section",{staticClass:"margin-bottom__medium",staticStyle:{"margin-left":"-10px","margin-right":"-10px"}},[a("el-table",{staticClass:"margin-bottom__small has-border tabel-normal",staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,"cell-style":t.setCellStyle,"header-cell-style":{backgroundColor:"#e1f5fe"},"span-method":t.arraySpanMethod}},[a("el-table-column",{attrs:{prop:"name",resizable:!1,label:"阶段",width:"60",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"plan",resizable:!1,label:"进度"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return e.$index,[1===l.state?a("span",{staticClass:"state-style is-state__1-text"},[t._v("完成")]):a("span",{staticClass:"state-style is-state__3-text"},[t._v("未开始")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"money",resizable:!1,label:"投入金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"timer",resizable:!1,label:"时间范围"}})],1)],1),t._v(" "),a("p",{staticClass:"title-bar"},[a("span",{staticClass:"titles"},[t._v("历史提交记录")])]),t._v(" "),a("section",{staticStyle:{"margin-left":"-10px","margin-right":"-10px"}},[a("el-table",{staticClass:"table-wipeoff-bg",staticStyle:{width:"100%"},attrs:{data:t.tableData1}},[a("el-table-column",{attrs:{prop:"time",label:"时间",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"plan",label:"进度"}}),t._v(" "),a("el-table-column",{attrs:{prop:"money",label:"金额"}}),t._v(" "),a("el-table-column",{attrs:{label:"照片/图片"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return t._l(l.imgs,function(e,l){return a("img",{key:l,staticClass:"cursor margin-bottom__mini margin-right__mini",attrs:{src:e,width:"50"},on:{click:function(a){return t.handlePictureCardPreview(e)}}})})}}])})],1)],1)])])],1)],1),t._v(" "),a("el-dialog",{staticClass:"common-modal",attrs:{title:"未开工时间确认",visible:t.dialogTime,width:"480"},on:{"update:visible":function(e){t.dialogTime=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableHistory}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"倒排工作项"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"倒排时间节点",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态"}},[[a("span",{staticClass:"state-style is-state__1-text"},[t._v("完成")]),t._v(" "),a("el-button",{attrs:{type:"text"}},[t._v("完成")])]],2)],1)],1)],1)},staticRenderFns:[]};var r=a("C7Lr")(s,i,!1,function(t){a("5k/h")},null,null);e.default=r.exports},"5k/h":function(t,e){}});
//# sourceMappingURL=19.52868bf6013d9b8669f8.js.map