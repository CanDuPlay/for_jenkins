webpackJsonp([10],{SY29:function(t,e){},ot1q:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"}],yearList:[],statusOptions:[{value:"",label:"全部"},{value:"1",label:"未开始"},{value:"2",label:"进行中"},{value:"3",label:"已完成"}],year:"",status:"",projectName:"",switchBtn:!0,finishTime:"",page:[],pageSize:10,currentPage:1}},mounted:function(){this.$nextTick(function(){this.initYear(),this.init()})},methods:{init:function(){var t=this;this.$post("/web/queryProjectList",{year:this.year,status:this.status,projectName:this.projectName,page:this.currentPage-1,size:this.pageSize}).then(function(e){0==e.resultCode&&(t.page=e.content.page)})},initYear:function(){var t=this;this.$post("/web/queryProjectYears",{}).then(function(e){0==e.resultCode&&(t.yearList=e.content.list,t.yearList.unshift({id:"",name:"全部"}))})},change:function(t){var e=this;this.$post("/web/changeProjectTime",{projectId:t.id,finishTime:t.finishTime}).then(function(t){0==t.resultCode&&e.$message({type:"success",message:"截止申报时间更新成功！"})})},changeStatus:function(t){var e=this;t.switchValue?this.$post("/web/changeProjectStatus",{projectId:t.id,status:0}).then(function(t){0==t.resultCode&&e.$message({type:"success",message:"项目解封成功！"})}):this.$post("/web/changeProjectStatus",{projectId:t.id,status:4}).then(function(t){0==t.resultCode&&e.$message({type:"success",message:"项目封存成功！"})})},addProject:function(){sessionStorage.removeItem("EditCityProjectID"),this.$router.push({name:"CityProjectAdd"})},editData:function(t){sessionStorage.setItem("EditCityProjectID",t),this.$router.push({name:"CityProjectAdd"})},deleteData:function(t){var e=this;this.$confirm("删除后将无法恢复，确定删除该数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post("/web/deleteProject",{projectId:t}).then(function(t){0==t.resultCode?(e.$message({type:"success",message:"项目删除成功！"}),e.init()):e.$message({type:"info",message:t.resultDesc})})}).catch(function(){e.$message({showClose:!0,type:"info",message:"已取消删除！"})})},handleSizeChange:function(t){this.pageSize=t,this.init()},handleCurrentChange:function(t){this.currentPage=t,this.init()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"city-project-index",attrs:{id:"city-project"}},[a("el-form",{staticClass:"operation-bar clearfix",attrs:{inline:""}},[a("el-form-item",[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"项目时间"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}},t._l(t.yearList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"项目状态"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statusOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"输入关键词"},model:{value:t.projectName,callback:function(e){t.projectName=e},expression:"projectName"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-search"},on:{click:function(e){return t.init()}}},[t._v("查询")])],1),t._v(" "),a("div",{staticClass:"pull-right margin-bottom__medium"},[a("el-button",{attrs:{type:"primary"}},[t._v("导入项目")]),t._v(" "),a("el-button",{on:{click:t.addProject}},[t._v("创建项目")])],1)],1),t._v(" "),a("ul",{staticClass:"list margin-bottom__small"},t._l(t.page.content,function(e,i){return a("li",{key:i,staticClass:"item"},[a("section",{staticClass:"item-title"},[a("span",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),a("el-switch",{staticClass:"pull-right",on:{change:function(s){return t.changeStatus(e)}},model:{value:e.switchValue,callback:function(s){t.$set(e,"switchValue",s)},expression:"item.switchValue"}})],1),t._v(" "),a("section",{staticClass:"item-content clearfix"},[a("section",{staticClass:"left pull-left",on:{click:function(s){return t.$router.push({name:"CountyProjectDetail",params:{projectId:e.id}})}}},[a("img",{staticClass:"img",attrs:{src:s("7Otq"),alt:""}}),t._v(" "),a("div",{staticClass:"state-bar"},[2==e.staus?a("el-tag",{staticClass:"state-style is-state__1",attrs:{size:"mini",type:"success"}},[t._v("进行中")]):t._e(),t._v(" "),1==e.staus?a("el-tag",{staticClass:"state-style is-state__3",attrs:{size:"mini",type:"success"}},[t._v("未开始")]):t._e()],1)]),t._v(" "),a("section",{staticClass:"right pull-left"},[a("div",{staticClass:"info clearfix margin-bottom__small"},[a("span",[t._v("项目周期："+t._s(t._f("YYYY")(e.startTime))+" - "+t._s(t._f("YYYY")(e.endTime)))]),t._v(" "),a("span",{staticClass:"pull-right"},[t._v("学校数量："+t._s(e.schoolNum)+"个")])]),t._v(" "),a("div",{staticClass:"titme margin-bottom__medium"},[t._v("\n              截止申报时间：\n              "),a("el-date-picker",{attrs:{width:"220px",format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择日期时间","value-format":"timestamp"},on:{change:function(s){return t.change(e)}},model:{value:e.finishTime,callback:function(s){t.$set(e,"finishTime",s)},expression:"item.finishTime"}})],1),t._v(" "),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(s){return t.$router.push({name:"CityCheckInfo",params:{projectId:e.id,projectName:e.name}})}}},[t._v("项目进展")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(s){return t.editData(e.id)}}},[t._v("项目流程")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(s){return t.deleteData(e.id)}}},[t._v("删除")])],1)])])])}),0),t._v(" "),t.page.totalPages>0?a("el-pagination",{staticClass:"is-background-white text-center",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1)},staticRenderFns:[]};var n=s("C7Lr")(a,i,!1,function(t){s("SY29")},"data-v-af1fd038",null);e.default=n.exports}});
//# sourceMappingURL=10.6349a2461dec12f4aa0e.js.map