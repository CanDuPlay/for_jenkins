webpackJsonp([16],{Tmqs:function(t,e){},b6Ti:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("J8vU");var n=s("1/Ac"),o={data:function(){return{stageList:[],stage:"",heshiList:[{value:"",label:"全部"},{value:"1",label:"已核实"},{value:"2",label:"未核实"}],heshi:"",value:"",radio:0,tableData:[],townId:"",townList:[],CITY:1,DISTRICT:2,SCHOOL:3,showSchool:!0,showSchoolInfo:!0,ifCheck:sessionStorage.getItem("ifCheck"),lastStatus:sessionStorage.getItem("lastStatus"),nextStatus:sessionStorage.getItem("nextStatus"),status:sessionStorage.getItem("status"),month:"",projectId:this.$route.params.projectId,projectName:this.$route.params.projectName}},computed:{tMenu:function(){return this.tableData[0].scheduleList}},mounted:function(){this.$nextTick(function(){this.queryStage(),this.queryTown(),this.queryInit()})},methods:{queryInit:function(){var t=this;this.$post("/web/kanbanList",{projectId:t.projectId,month:t.month,status:t.lastStatus,level:"1",stage:t.stage,heshi:t.heshi,town_id:t.townId}).then(function(e){t.tableData=e.content.list,""==t.month&&(t.month=e.content.month)})},check:function(t,e,s,n){var o=this;o.$post("/web/checkStatus",{checkType:s,status:t,lastStatus:n,projectId:o.projectId,id:e,month:o.month}).then(function(t){o.$message({type:"success",message:"审核成功!"}),o.queryInit()}).catch(function(t){})},queryStage:function(){var t=this;this.$post("/web/queryStage",{projectId:t.projectId}).then(function(e){t.stageList=e.content.list,t.stageList.unshift({id:"",name:"全部"})})},queryTown:function(){var t=this;this.$post("/web/queryTownByProjectId",{projectId:t.projectId}).then(function(e){t.townList=e.content.list,t.townList.unshift({id:"",name:"全部"})})},openSchoolInfo:function(t,e){t.target;e.level==this.DISTRICT?this.getChildren(".school_"+e.id):e.level==this.SCHOOL&&this.getChildren(".school-info_"+e.id)},getChildren:function(t){document.querySelector("#spectaculars-table").querySelectorAll(t).forEach(function(t){Object(n.c)(t,"hide")?Object(n.e)(t,"hide"):Object(n.a)(t,"hide")})},rowMerge:function(t){return t.invertedList?4:1},setRowClass:function(t){return t.level===this.DISTRICT?"district":t.level===this.SCHOOL?"school_"+t.id:void 0}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"city-checkinfo__wrapper"},[s("div",{staticClass:"title-bar__big clearfix"},[s("span",[t._v(t._s(t.projectName))]),t._v(" "),s("el-button",{staticClass:"pull-right",attrs:{type:"text"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])],1),t._v(" "),s("el-form",{attrs:{inline:""}},[s("el-form-item",[s("el-date-picker",{attrs:{format:"yyyy-MM",type:"month","value-format":"yyyy-MM",placeholder:"选择月份"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1),t._v(" "),s("el-form-item",[s("el-select",{attrs:{placeholder:"全部核实状态"},model:{value:t.heshi,callback:function(e){t.heshi=e},expression:"heshi"}},t._l(t.heshiList,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("el-form-item",[s("el-select",{attrs:{placeholder:"所有区县"},model:{value:t.townId,callback:function(e){t.townId=e},expression:"townId"}},t._l(t.townList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.queryInit}},[t._v("查询")])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"开工状态"}},[s("el-radio-group",{model:{value:t.stage,callback:function(e){t.stage=e},expression:"stage"}},t._l(t.stageList,function(e){return s("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))])}),1)],1)],1)],1)],1),t._v(" "),t.tableData.length?s("div",{staticClass:"spectaculars-table-wrap"},[s("table",{staticClass:"table multifunction-table",attrs:{id:"spectaculars-table"}},[s("thead",[s("tr",[s("th",{attrs:{rowspan:"2"}},[t._v("序号")]),t._v(" "),s("th",{attrs:{rowspan:"2"}},[t._v("项目学校")]),t._v(" "),s("th",{attrs:{colspan:"4"}},[t._v("项目基本情况")]),t._v(" "),s("th",{attrs:{colspan:"2"}},[t._v("建设时限情况")]),t._v(" "),s("th",{attrs:{colspan:t.tMenu.length}},[t._v("项目形象进度情况")]),t._v(" "),s("th",{attrs:{rowspan:"2"}},[t._v("累计完成投资")]),t._v(" "),s("th",{attrs:{rowspan:"2"}},[t._v("材料图片或现场照片")]),t._v(" "),1==t.ifCheck?s("th",{attrs:{rowspan:"2"}},[t._v("操作")]):t._e()]),t._v(" "),s("tr",[s("th",[t._v("学校类型")]),t._v(" "),s("th",[t._v("建筑面积")]),t._v(" "),s("th",[t._v("新增学位")]),t._v(" "),s("th",[t._v("规划总投资")]),t._v(" "),s("th",[t._v("开工年份")]),t._v(" "),s("th",[t._v("竣工年份")]),t._v(" "),t._l(t.tMenu,function(e,n){return s("th",{key:n,style:{backgroundColor:e.color}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t")])})],2)]),t._v(" "),t._l(t.tableData,function(e,n){return s("tbody",{key:n,class:[t.setRowClass(e),"row-school-info_bgcolor",{hide:t.showSchool&&e.level===t.SCHOOL,hasChild:!!e.child,"row-city__bgcolor":e.level===t.CITY,"row-district__bgcolor":e.level===t.DISTRICT}],on:{click:function(s){return t.openSchoolInfo(s,e)}}},[s("tr",[s("td",{attrs:{rowspan:t.rowMerge(e)}},[t._v(t._s(e.sort))]),t._v(" "),s("td",{attrs:{rowspan:t.rowMerge(e)}},[t._v(t._s(e.schoolName))]),t._v(" "),s("td",{attrs:{rowspan:t.rowMerge(e)}},[t._v(t._s(e.schoolType))]),t._v(" "),s("td",{attrs:{rowspan:t.rowMerge(e)}},[t._v(t._s(e.area))]),t._v(" "),s("td",{attrs:{rowspan:t.rowMerge(e)}},[t._v(t._s(e.newBuild))]),t._v(" "),s("td",{attrs:{rowspan:t.rowMerge(e)}},[t._v(t._s(e.invest))]),t._v(" "),s("td",[t._v(t._s(e.startYear))]),t._v(" "),s("td",[t._v(t._s(e.endYear))]),t._v(" "),t._l(t.tMenu,function(n,o){return s("td",{key:o},[e.level===t.CITY||e.level===t.DISTRICT?s("span",[t._v(t._s(null!=e.scheduleList[o]&&null!=e.scheduleList[o].count?e.scheduleList[o].count:""))]):n.id===e.schedule?s("i",{staticClass:"el-icon-star-on",staticStyle:{color:"#f54b10"}}):t._e()])}),t._v(" "),s("td",[t._v(t._s(e.allInvest))]),t._v(" "),s("td",{attrs:{rowspan:t.rowMerge(e)}},t._l(e.fileList,function(t,e){return s("img",{attrs:{src:t.fileUrl,width:"50",alt:""}})}),0),t._v(" "),1==t.ifCheck?s("td",{attrs:{rowspan:t.rowMerge(e)}},[1!=e.level&&2!=e.level||e.minStatus!=t.lastStatus?t._e():s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.check(t.status,e.townId,e.level,t.lastStatus)}}},[t._v("全部核实")]),t._v(" "),3==e.level&&t.lastStatus==e.status?s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.check(t.status,e.id,e.level,t.lastStatus)}}},[t._v("通过核实")]):t._e(),t._v(" "),3==e.level&&t.lastStatus==e.status?s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.check(0,e.id,e.level,t.lastStatus)}}},[t._v("不通过")]):t._e(),t._v(" "),3==e.level&&t.lastStatus<e.status?s("span",{staticClass:"state-style is-state__1-text margin-right__mini"},[t._v("已核实")]):t._e(),t._v(" "),3==e.level&&t.status==e.status?s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.check(t.lastStatus,e.id,e.level,t.status)}}},[t._v("取消")]):t._e()],1):t._e()],2),t._v(" "),e.invertedList&&e.invertedList.length>0?s("tr",{class:[{hide:t.showSchoolInfo},"school-info_"+e.id]},[s("td",[t._v("重点说明情况：")]),t._v(" "),s("td",{attrs:{colspan:e.invertedList.length}},[t._v(t._s(e.reward))])]):t._e(),t._v(" "),e.invertedList&&e.invertedList.length>0?s("tr",{class:[{hide:t.showSchoolInfo},"school-info_"+e.id]},[s("td",{attrs:{rowspan:"2"}},[t._v("倒排时间节点：")]),t._v(" "),t._l(e.invertedList,function(e,n){return s("td",{key:n},[t._v(t._s(e.name))])})],2):t._e(),t._v(" "),e.invertedList&&e.invertedList.length>0?s("tr",{class:[{hide:t.showSchoolInfo},"school-info_"+e.id]},t._l(e.invertedList,function(e,n){return s("td",{key:n},[t._v(t._s(t._f("YMD")(e.time)))])}),0):t._e()])})],2)]):t._e()],1)},staticRenderFns:[]};var l=s("C7Lr")(o,a,!1,function(t){s("Tmqs")},null,null);e.default=l.exports}});
//# sourceMappingURL=16.4516f150e8d5b75520e0.js.map